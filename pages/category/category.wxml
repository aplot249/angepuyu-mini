<view class="page-container font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}">

  <!-- [æ–°å¢] é¡¶éƒ¨æœç´¢æ¡† (å›ºå®šåœ¨é¡¶éƒ¨) -->
  <view class="search-section">
    <view class="search-input-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="real-search-input"
        type="text"
        confirm-type="search"
        placeholder="è¯åº“æœç´¢å•è¯çŸ­è¯­ï¼Œå¯è¾“å…¥ä¸­æ–‡ã€è‹±è¯­ã€è‘¡è¯­" 
        placeholder-class="search-placeholder"
        value="{{searchContent}}"
        bindinput="onSearchInput"
        bindconfirm="handleSearchTap"
      />
      <view class="search-btn" bindtap="handleSearchTap">æœç´¢</view>
    </view>
  </view>

  <view class="content-area flex-row">
    <!-- å·¦ä¾§å¯¼èˆª -->
    <scroll-view scroll-y class="left-nav">
      <block wx:for="{{categories}}" wx:key="id">
        <view class="nav-item {{activeIdx === index ? 'active' : ''}}" bindtap="switchCat" data-index="{{index}}">
          <view class="indicator" wx:if="{{activeIdx === index}}"></view>
          <text>{{item.name}}</text>
        </view>
      </block>
    </scroll-view>

    <!-- å³ä¾§å†…å®¹ -->
    <scroll-view scroll-y class="right-content">
      <view class="content-header">
        <text class="header-line"></text>
        <text class="header-title" wx:if="{{categories[activeIdx].sum}}">{{categories[activeIdx].name}}({{categories[activeIdx].sum}})</text>
        <text class="header-line"></text>
      </view>

      <view class="sub-grid">
        <block wx:for="{{categories[activeIdx].sublingyu}}" wx:key="id">
          <view class="sub-item card" bindtap="goToList" data-subid="{{item.id}}" data-subname="{{item.name}}">
            <view class="sub-icon text-primary">ğŸ“‚</view>
            <text class="sub-name">{{item.name}}({{item.count}})</text>
            <!-- [æ–°å¢] åº•éƒ¨åœ†å½¢å›¾æ ‡æŒ‰é’® -->
            <view class="action-row" catchtap="toggleSubFav" data-id="{{item.id}}" data-isFaved="{{item.isFaved}}">
              <view class="circle-btn">
                <text class="fav-icon" wx:if="{{!item.isFaved}}">ğŸ¤åŠ å…¥å­¦ä¹ </text> 
                <text class="fav-icon" wx:if="{{item.isFaved}}">â¤ï¸ç§»å‡ºå­¦ä¹ </text> 
              </view>
            </view>
          </view>
        </block>
      </view>
    </scroll-view>

  </view>

</view>
<welcome-modal></welcome-modal>