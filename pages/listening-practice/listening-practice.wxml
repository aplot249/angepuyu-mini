<view class="container font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}">
  
  <!-- é¡¶éƒ¨è¿›åº¦æ¡ -->
  <view class="progress-bar">
    <view class="progress-track">
      <view class="progress-fill" style="width: {{(currentIndex + 1) / questions.length * 100}}%"></view>
    </view>
    <text class="progress-text">{{currentIndex + 1}} / {{questions.length}}</text>
  </view>

  <!-- å¬éŸ³å¡ç‰‡ -->
  <view class="audio-section">
    <view class="speaker-btn {{isPlaying ? 'playing' : ''}}" bindtap="playAudio">
      <text class="speaker-icon">ğŸ”Š</text>
      <view class="wave w1"></view>
      <view class="wave w2"></view>
    </view>
    <text class="hint-text">ç‚¹å‡»æ’­æ”¾éŸ³é¢‘ï¼Œå°†ä¸‹æ–¹å•è¯æ’åº</text>
  </view>

  <!-- ä½œç­”åŒº (æ¨ªçº¿) -->
  <view class="answer-area">
    <view class="answer-slots">
      <block wx:for="{{answerSlots}}" wx:key="id">
        <view class="word-chip filled" bindtap="removeWord" data-index="{{index}}">
          {{item.text}}
        </view>
      </block>
      <!-- å¦‚æœæ²¡æœ‰é€‰è¯ï¼Œæ˜¾ç¤ºæç¤ºçº¿ -->
      <view class="placeholder-line" wx:if="{{answerSlots.length === 0}}">
        è¯·é€‰æ‹©ä¸‹æ–¹å•è¯ç»„å¥
      </view>
    </view>
    
    <!-- ç»“æœåé¦ˆ -->
    <view class="feedback-box {{checkStatus}}" wx:if="{{checkStatus !== 'idle'}}">
      <view class="status-icon">{{checkStatus === 'correct' ? 'âœ… å›ç­”æ­£ç¡®' : 'âŒ å›ç­”é”™è¯¯'}}</view>
      <view class="correct-answer" wx:if="{{checkStatus === 'wrong'}}">
        <text class="ca-label">æ­£ç¡®å¥å­ï¼š</text>
        <text class="ca-text">{{currentQuestion.sentence}}</text>
      </view>
      <view class="translation">{{currentQuestion.translation}}</view>
    </view>
  </view>

  <!-- é€‰è¯åŒº -->
  <view class="word-bank">
    <block wx:for="{{shuffledWords}}" wx:key="id">
      <view 
        class="word-chip bank-item {{item.selected ? 'hidden' : ''}}" 
        bindtap="selectWord" 
        data-index="{{index}}"
      >
        {{item.text}}
      </view>
    </block>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="footer-action">
    <!-- çŠ¶æ€ï¼šæœªæäº¤ -->
    <button 
      wx:if="{{checkStatus === 'idle'}}" 
      class="btn check-btn {{answerSlots.length === 0 ? 'disabled' : ''}}" 
      bindtap="checkAnswer"
    >
      æ£€æŸ¥ç­”æ¡ˆ
    </button>

    <!-- çŠ¶æ€ï¼šé”™è¯¯ -->
    <button 
      wx:elif="{{checkStatus === 'wrong'}}" 
      class="btn retry-btn" 
      bindtap="retryQuestion"
    >
      å†è¯•ä¸€æ¬¡
    </button>

    <!-- çŠ¶æ€ï¼šæ­£ç¡® -->
    <button 
      wx:elif="{{checkStatus === 'correct'}}" 
      class="btn next-btn" 
      bindtap="nextQuestion"
    >
      ä¸‹ä¸€é¢˜
    </button>
  </view>

</view>