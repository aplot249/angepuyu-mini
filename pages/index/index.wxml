<view class="container font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}" style="padding: 0;">
  
  <!-- é¡¶éƒ¨å¼§å½¢èƒŒæ™¯ & é—®å€™è¯­åŒºåŸŸ -->
  <view class="header-arc-bg" style="padding-bottom: 200rpx;">
    <view style="height: {{statusBarHeight}}px;"></view>
    <view class="nav-content" style="height: {{navBarHeight}}px;">
      <view class="greeting-container">
        <view class="greeting-text">{{greeting}} ğŸ‘‹</view>
        <view class="rate-badge">
          <text class="rate-icon">ğŸ’±</text>
          <text>ä»Šæ—¥æ±‡ç‡ï¼š1 äººæ°‘å¸ â‰ˆ {{exchangeRate}} å®½æ‰</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é¡µé¢ä¸»ä½“å†…å®¹ -->
  <view class="main-content" style="margin-top: {{totalNavHeight + 20}}px;">
    
      <!-- [ä¿®æ”¹] æœç´¢æ¡† - æ”¹ä¸ºçœŸå®è¾“å…¥æ¡† -->
      <view class="search-container">
      <view class="search-input-box">
        <text class="search-icon">ğŸ”</text>
        <input 
          class="real-search-input"
          type="text"
          confirm-type="search"
          placeholder="è¯åº“æœç´¢å•è¯çŸ­è¯­ï¼Œå¯è¾“å…¥ä¸­æ–‡ã€è‹±è¯­ã€è‘¡è¯­" 
          placeholder-class="search-placeholder"
          value="{{searchContent}}"
          bindinput="onSearchInput"
          bindconfirm="handleSearchTap"
        />
      </view>
    </view>

    <!-- 1. ä¸»è½®æ’­å›¾ -->
    <swiper class="banner-swiper main" indicator-dots="true" autoplay="true" interval="5000" circular="true" indicator-active-color="#FEC99D" indicator-color="rgba(255, 255, 255, 0.8)">
      <block wx:for="{{banners}}" wx:key="id">
        <swiper-item bindtap="onBannerTap" data-id="{{item.id}}">
          <image src="{{item.image_url}}" class="slide-image" mode="aspectFill"/>
          <view class="banner-title-mask">
            <text class="banner-title">{{item.name}}</text>
          </view>
        </swiper-item>
      </block>
    </swiper>
    
    <!-- 2. æ»šåŠ¨å–‡å­ -->
    <view class="notice-bar">
      <view class="notice-icon">ğŸ“¢</view>
      <swiper class="notice-swiper" vertical="true" autoplay="true" circular="true" interval="3000">
        <block wx:for="{{announcements}}" wx:key="*this">
          <swiper-item>
            <view class="notice-item">{{item.content}}</view>
          </swiper-item>
        </block>
      </swiper>
    </view>

    <!-- 3. æ ¸å¿ƒåŠŸèƒ½åŒº I -->
    <view class="func-grid-row">
      <view class="func-card review-style" bindtap="navigateToReview">
        <view class="f-icon-box">ğŸ´</view>
        <view class="f-text-box">
          <text class="f-title">å¡ç‰‡å­¦ä¹ </text>
          <text class="f-desc">Review</text>
        </view>
      </view>
      
      <view class="func-card quiz-style" bindtap="navigateToQuiz">
        <view class="f-icon-box">ğŸ“</view>
        <view class="f-text-box">
          <text class="f-title">åšé¢˜ç»ƒä¹ </text>
          <text class="f-desc">Quiz</text>
        </view>
      </view>
    </view>

    <!-- 4. æ ¸å¿ƒåŠŸèƒ½åŒº II -->
    <view class="func-grid-row" wx:if="{{isLoggedIn}}">
      <view class="func-card wordbook-style" bindtap="navigateToWordbook">
        <view class="f-icon-box">â­ï¸</view>
        <view class="f-text-box">
          <text class="f-title">æˆ‘çš„ç”Ÿè¯</text>
          <text class="f-desc">Favorites</text>
        </view>
      </view>

      <view class="func-card mistake-style" bindtap="navigateToMistake" wx:if="{{isLoggedIn}}">
        <view class="f-icon-box">ğŸ““</view>
        <view class="f-text-box">
          <text class="f-title">æˆ‘çš„é”™é¢˜</text>
          <text class="f-desc">Mistakes</text>
        </view>
      </view>
    </view>

    <!-- [æ–°å¢] 4.5 æ‰©å±•åŠŸèƒ½åŒºï¼šçŸ¥è¯†åº“ä¸ç¤¾åŒº -->
    <view class="func-grid-row">
      <!-- <view class="func-card knowledge-style" bindtap="navigateToKnowledge">
        <view class="f-icon-box">ğŸ“š</view>
        <view class="f-text-box">
          <text class="f-title">çŸ¥è¯†åº“</text>
          <text class="f-desc">Library</text>
        </view>
      </view> -->
      
      <view class="func-card knowledge-style" bindtap="navigateToListening">
        <view class="f-icon-box">ğŸ§</view>
        <view class="f-text-box">
          <text class="f-title">å¬éŸ³ç»„å¥</text>
          <text class="f-desc">Listening</text>
        </view>
      </view>

      <view class="func-card community-style" bindtap="navigateToCommunity" wx:if="{{hh}}">
        <view class="f-icon-box">ğŸ’¬</view>
        <view class="f-text-box">
          <text class="f-title">äº¤æµç¤¾åŒº</text>
          <text class="f-desc">Community</text>
        </view>
      </view>
    </view>

    <!-- 5. æ¯æ—¥å•è¯ (ä¸€è¡Œä¸¤åˆ—) -->
    <view class="section-header">
      <view class="section-title">
        <text>æ¯æ—¥å•è¯</text>
        <text class="section-tag">Word</text>
      </view>
      <view class="refresh-btn" bindtap="refreshDaily">
        <text>ğŸ”„ æ¢ä¸€ç»„</text>
      </view>
    </view>
    
    <view class="daily-word-grid">
      <block wx:for="{{dailyWords}}" wx:key="id">
        <view class="word-card-refined" bind:tap="playAudio" data-type="word" data-item="{{item}}">
          <!-- é¡¶éƒ¨ï¼šå‘éŸ³ -->

          <view class="wc-header">
            <view class="wc-play-btn" catch:tap="playAudio" data-type="word" data-item="{{item}}">ğŸ”Š</view>
          </view>
          
          <!-- ä¸­é—´ï¼šæ ¸å¿ƒå•è¯ -->
          <view class="wc-body">
            <text class="wc-sw">{{item.swahili}}</text>
            <view class="wc-homonym">
              <text class="xytag">è°éŸ³</text>
              <text class="xieyin">{{item.xieyin}}</text>
            </view>
          </view>

          <!-- åº•éƒ¨ï¼šé‡Šä¹‰ -->
          <view class="wc-footer">
            <text class="wc-cn">{{item.chinese}}</text>
            <text class="wc-en">{{item.english}}</text>
          </view>
        </view>
      </block>
    </view>

    <!-- 6. å¹¿å‘Šä½ -->
    <!-- <swiper class="banner-swiper middle" autoplay="true" interval="4000" circular="true" indicator-dots="false">
      <block wx:for="{{middleBanners}}" wx:key="*this">
        <swiper-item>
          <image src="{{item}}" class="slide-image" mode="aspectFill"/>
        </swiper-item>
      </block>
    </swiper> -->

    <!-- 7. æ¯æ—¥çŸ­è¯­ (ä¸€è¡Œä¸€åˆ—ï¼Œä¸¤è¡Œæ•°æ®) -->
    <view class="section-header">
      <view class="section-title">
        <text>æ¯æ—¥çŸ­è¯­</text>
        <text class="section-tag">Phrase</text>
      </view>
    </view>

    <!-- ä½¿ç”¨åˆ—è¡¨å¾ªç¯å±•ç¤ºä¸¤ä¸ªçŸ­è¯­ -->
    <block wx:for="{{dailyPhrase}}" wx:key="id" wx:for-item="item" >
      <view class="phrase-card-refined" style="margin-bottom: 24rpx;" bindtap="playAudio" data-item="{{item}}" data-type="phrase">
        <view class="pc-content">
          <view class="pc-row-top">
            <text class="pc-sw">{{item.swahili}}</text>
            <view class="pc-play-btn" catch:tap="playAudio" data-item="{{item}}" data-type="phrase">ğŸ”Š</view>
          </view>
          
          <view class="pc-homonym-bar">
            <text class="tag">è°éŸ³</text>
            <text class="text">{{item.xieyin}}</text>
          </view>

          <view class="pc-trans-box">
            <text class="pc-cn">{{item.chinese}}</text>
            <text class="pc-en">{{item.english}}</text>
          </view>
        </view>

        <!-- <view class="pc-action-bar">
          <view class="pc-action-item">
            <text class="icon">âœï¸</text>
            <text class="label">çº é”™åé¦ˆ</text>
          </view>
        </view> -->

      </view>
    </block>

    <!-- åº•éƒ¨ç•™ç™½ -->
    <!-- <view style="height: 40rpx;"></view> -->
    <welcome-modal></welcome-modal>
  </view>
</view>