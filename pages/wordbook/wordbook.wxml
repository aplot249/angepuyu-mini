<view class="container list-page font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}">
  
  <!-- é¡¶éƒ¨å›ºå®šåŒº (æœç´¢ + Tab) -->
  <view class="fixed-header">
    <view class="search-bar">
      <view class="search-icon">ğŸ”</view>
      <input class="search-input" placeholder="æœç´¢æˆ‘çš„æ”¶è—..." bindinput="onSearchInput" value="{{searchText}}" />
    </view>
    
    <view class="segment-tab">
      <view class="segment-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-idx="0">å•è¯æœ¬</view>
      <view class="segment-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-idx="1">çŸ­è¯­é›†</view>
    </view>
  </view>

  <!-- æ»‘åŠ¨å†…å®¹åŒº -->
  <swiper class="content-swiper" current="{{currentTab}}" bindchange="onSwiperChange">
    
    <!-- 1. å•è¯åˆ—è¡¨ -->
    <swiper-item>
      <scroll-view scroll-y class="scroll-area" bindscrolltolower="loadMoreWords">
        <!-- ç©ºçŠ¶æ€ -->
        <view wx:if="{{wordList.length === 0}}" class="empty-state">
          <view class="empty-icon">ğŸ“‚</view>
          <text>è¿˜æ²¡æœ‰æ”¶è—å•è¯å“¦~</text>
        </view>

        <block wx:for="{{wordList}}" wx:key="id">
          <view class="card item-card" bindtap="toggleCheck" data-id="{{item.id}}" data-type="word">
            <!-- å¤é€‰æ¡† -->
            <view class="checkbox-area">
              <view class="custom-checkbox {{item.checked ? 'checked' : ''}}">
                <view wx:if="{{item.checked}}" class="check-mark">âœ“</view>
              </view>
            </view>
            
            <!-- å†…å®¹ (å¤ç”¨ List æ ·å¼ä½†ç®€åŒ–) -->
            <view class="content-area">
              <view class="row-top">
                <text class="swahili">{{item.swahili}}</text>
                <!-- é˜»æ­¢å†’æ³¡ï¼Œé¿å…ç‚¹å‡»æ’­æ”¾æ—¶è§¦å‘å‹¾é€‰ -->
                <view class="play-btn" catchtap="playAudio" data-item="{{item}}">ğŸ”Š</view>
              </view>
              <view class="homonym-tag">/ {{item.xieyin}} /</view>
              <view class="chinese">{{item.chinese}}</view>
            </view>
          </view>
        </block>

        <!-- åŠ è½½æç¤º -->
        <view class="loading-tip" wx:if="{{wordList.length > 0}}">
           <text wx:if="{{hasMoreWords}}">åŠ è½½ä¸­...</text>
           <text wx:else>--- åˆ°åº•å•¦ ---</text>
        </view>
        <!-- åº•éƒ¨å«é«˜ï¼Œé˜²é®æŒ¡ -->
        <view style="height: 200rpx;"></view>
      </scroll-view>
    </swiper-item>

    <!-- 2. çŸ­è¯­åˆ—è¡¨ -->
    <swiper-item>
      <scroll-view scroll-y class="scroll-area" bindscrolltolower="loadMorePhrases">
        <view wx:if="{{phraseList.length === 0}}" class="empty-state">
          <view class="empty-icon">ğŸ“‚</view>
          <text>è¿˜æ²¡æœ‰æ”¶è—çŸ­è¯­å“¦~</text>
        </view>

        <block wx:for="{{phraseList}}" wx:key="id">
          <view class="card item-card phrase-style" bindtap="toggleCheck" data-id="{{item.id}}" data-type="phrase">
            <view class="checkbox-area">
              <view class="custom-checkbox {{item.checked ? 'checked' : ''}}">
                <view wx:if="{{item.checked}}" class="check-mark">âœ“</view>
              </view>
            </view>
            
            <view class="content-area">
              <view class="row-top">
                <text class="swahili">{{item.swahili}}</text>
                <view class="play-btn orange" catchtap="playAudio" data-item="{{item}}">ğŸ”Š</view>
              </view>
              <view class="chinese text-secondary">{{item.chinese}}</view>
            </view>
          </view>
        </block>

        <view class="loading-tip" wx:if="{{phraseList.length > 0}}">
           <text wx:if="{{hasMorePhrases}}">åŠ è½½ä¸­...</text>
           <text wx:else>--- åˆ°åº•å•¦ ---</text>
        </view>
        <view style="height: 200rpx;"></view>
      </scroll-view>
    </swiper-item>

  </swiper>

  <!-- æ‚¬æµ®åŠŸèƒ½æŒ‰é’® (ä¿æŒä¸å˜) -->
  <view class="fab-group">
    <view class="fab-btn purple" bindtap="selectAll" hover-class="btn-hover">
      <text class="fab-icon">âœ…</text>
    </view>
    <view class="fab-btn gray" bindtap="unselectAll" hover-class="btn-hover">
      <text class="fab-icon">â</text>
    </view>
    <view class="fab-btn blue" bindtap="exportDoc" hover-class="btn-hover">
      <text class="fab-icon">ğŸ“„</text>
    </view>
    <view class="fab-btn teal" bindtap="playStream" hover-class="btn-hover">
      <text class="fab-icon">â–¶ï¸</text>
    </view>
  </view>
</view>