<view class="container font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}">
  
  <!-- 1. é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="nav-header">
    <scroll-view class="tab-scroll" scroll-x enable-flex scroll-with-animation scroll-left="{{scrollLeft}}">
      <view class="tab-container">
        <block wx:for="{{categories}}" wx:key="id">
          <view 
            class="tab-item {{currentTab === index ? 'active' : ''}}" 
            bindtap="switchTab" 
            data-index="{{index}}"
          >
            <text class="tab-text">{{item.name}}</text>
            <view class="tab-line" wx:if="{{currentTab === index}}"></view>
          </view>
        </block>
      </view>
    </scroll-view>
  </view>

  <!-- 2. æ»‘åŠ¨å†…å®¹åŒº -->
  <swiper 
    class="content-swiper" 
    current="{{currentTab}}" 
    duration="300" 
    bindchange="onSwiperChange"
  >
    <block wx:for="{{categories}}" wx:key="id" wx:for-item="cat">
      <swiper-item>
        <scroll-view 
          scroll-y 
          class="list-scroll" 
          bindscrolltolower="loadMoreData"
          enhanced
          show-scrollbar="false"
        >
          
          <!-- æ–‡ç« åˆ—è¡¨ -->
          <view class="article-list">
            <block wx:for="{{cat.articles}}" wx:key="id" wx:for-item="article">
              <view class="article-card" bindtap="navigateToDetail" data-id="{{article.id}}">
                
                <!-- å·¦ä¾§ï¼šæ–‡æœ¬ä¿¡æ¯ -->
                <view class="info-box">
                  <text class="title">{{article.title}}</text>
                  <text class="summary">{{article.summary}}</text>
                  
                  <view class="meta-row">
                    <view class="author-box">
                      <image class="author-avatar" src="{{baseImgUrl+'/'+article.avatar}}" mode="aspectFill"></image>
                      <text class="author-name">{{article.author}}</text>
                    </view>
                    <text class="date">{{article.date}}</text>
                  </view>
                </view>

                <!-- å³ä¾§ï¼šå°é¢å›¾ -->
                <image class="cover-img" src="{{baseImgUrl+'/'+article.cover}}" mode="aspectFill" lazy-load></image>
              </view>
            </block>
          </view>

          <!-- åŠ è½½çŠ¶æ€ -->
          <view class="loading-state">
            <text wx:if="{{cat.isLoading}}">ðŸ”„ åŠ è½½ä¸­...</text>
            <text wx:elif="{{!cat.hasMore}}">- åˆ°åº•å•¦ -</text>
          </view>
          
          <!-- åº•éƒ¨ç•™ç™½ -->
          <view style="height: 40rpx;"></view>

        </scroll-view>
      </swiper-item>
    </block>
  </swiper>

</view>