<view class="container list-page font-lvl-{{fontSizeLevel}} {{isDarkMode ? 'dark-mode' : ''}}">
  
  <!-- é¡¶éƒ¨å›ºå®šåŒº (ä¿æŒä¸å˜) -->
  <view class="fixed-header">
    <input class="main-search" placeholder="åœ¨{{subname}}ä¸­æŸ¥æ‰¾{{currentTab==0?'å•è¯':'çŸ­è¯­'}}..." bindinput="onSearch" value="{{keyword}}" placeholder-class="ph-color"/>
    
    <view class="segment-tab">
      <view class="segment-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-idx="0">å•è¯</view>
      <view class="segment-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-idx="1">çŸ­è¯­</view>
    </view>
  </view>

  <!-- æ»‘åŠ¨å†…å®¹åŒº -->
  <swiper class="content-swiper" current="{{currentTab}}" bindchange="onSwiperChange">
    
    <!-- 1. å•è¯åˆ—è¡¨ -->
    <swiper-item>
      <scroll-view scroll-y class="scroll-area" bindscrolltolower="loadMore">
        
        <block wx:for="{{wordList}}" wx:key="id">
          <view class="card item-card word-layout" bind:tap="playAudio" data-type="word" data-item="{{item}}" data-xiaohao="{{item.xiaohao}}">
            <view class="card-main">
              <!-- [ä¿®æ”¹] æ ¸å¿ƒä¿¡æ¯æ”¾å·¦ä¾§ -->
              <view class="info-col">
                <view class="row-flex">
                  <text class="sw-text">{{item.swahili}}</text>
                  <!-- è¯­éŸ³æ’­æ”¾æŒ‰é’® (å¤§) -->
                  <view class="play-btn" catchtap="playAudio" data-type="word" data-item="{{item}}" data-xiaohao="{{item.xiaohao}}">ğŸ”Š</view>
                </view>
                
                <view class="homonym-box">
                  <text class="tag">è°éŸ³</text>
                  <text class="hm-text">{{item.xieyin}}</text>
                </view>

                <view class="trans-box">
                  <text class="cn-text" catch:tap="hanplayAudio" data-item="{{item}}">{{item.chinese}} ğŸ”Š</text>
                  <text class="en-text" catch:tap="engplayAudio" data-item="{{item}}">{{item.english}} ğŸ”Š</text>
                </view>
              </view>

              <!-- [ä¿®æ”¹] å›¾ç‰‡æ”¾å³ä¾§ï¼Œä¸”éå¿…é¡» (wx:if) -->
              <!-- <image wx:if="{{item.portrait}}" class="word-img" src="{{item.portrait}}" mode="aspectFill" lazy-load></image> -->
            </view>

            <!-- åº•éƒ¨æ“ä½œæ  -->
            <view class="card-footer">
              <!-- å·¦ä¸‹ï¼šæ”¶è— (å¤§) -->
              <view class="action-fav" catchtap="toggleFav" data-isFav="{{item.isFav}}" data-id="{{item.id}}">
                <text class="fav-icon {{item.isFav ? 'active' : ''}}">{{item.isFav ? 'â¤ï¸' : 'ğŸ¤'}}</text>
                <text class="fav-label {{item.isFav ? 'active' : ''}}">{{item.isFav ? 'ç§»å‡ºå­¦ä¹ ' : 'åŠ å…¥å­¦ä¹ '}}</text>
              </view>
              <!-- [æ–°å¢] ä¸­é—´ï¼šå½’å±åˆ†ç±» -->
              <view class="category-tag">
                <text class="tag-icon">ğŸ·ï¸</text>
                <text>{{item.lingyuname}}</text>
              </view>
              <!-- å³ä¸‹ï¼šçº é”™ (å°) -->
              <view class="action-fix">
                <text catchtap="jiucuoCtitem" data-dd="{{item.id}}">çº é”™</text>
              </view>
            </view>
          </view>
        </block>

        <!-- [ä¿®æ”¹] ç©ºçŠ¶æ€å±•ç¤º -->
        <view wx:if="{{wordList.length === 0}}" class="empty-state">
          <view class="empty-icon">ğŸƒ</view>
          <text class="empty-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†…å®¹</text>
          <text class="empty-sub">æ¢ä¸ªå…³é”®è¯è¯•è¯•çœ‹ï¼Ÿ</text>
        </view>

        <view class="loading-tip" wx:if="{{wordList.length > 0}}">
           <text wx:if="{{hasMoreWords}}">åŠ è½½ä¸­...</text>
           <text wx:else>--- åˆ°åº•å•¦ ---</text>
        </view>
        <view style="height: 100rpx;"></view>
      </scroll-view>
    </swiper-item>

    <!-- 2. çŸ­è¯­åˆ—è¡¨ (ä¿æŒä¸å˜) -->
    <swiper-item>
      <scroll-view scroll-y class="scroll-area" bindscrolltolower="loadMore">
        
        <block wx:for="{{phraseList}}" wx:key="id">
          <view class="card item-card phrase-layout" bind:tap="playAudio" data-type="phrase" data-item="{{item}}" data-xiaohao="{{item.xiaohao}}">
            <!-- é¡¶éƒ¨ï¼šæ–¯è¯­é•¿å¥ + æ’­æ”¾ -->
            <view class="phrase-header">
              <text class="sw-sentence">{{item.swahili}}</text>
              <view class="play-btn large" catchtap="playAudio" data-item="{{item}}">ğŸ”Š</view>
            </view>

            <!-- ä¸­éƒ¨ï¼šè°éŸ³ -->
            <view class="homonym-row">
              <text class="tag">è°éŸ³</text>
              <text class="hm-sentence">{{item.xieyin}}</text>
            </view>

            <!-- ä¸­éƒ¨ï¼šé‡Šä¹‰ -->
            <view class="meaning-col">
              <text class="cn-sentence" catch:tap="hanplayAudio" data-item="{{item}}">{{item.chinese}} ğŸ”Š</text>
              <text class="en-sentence" catch:tap="engplayAudio" data-item="{{item}}">{{item.english}} ğŸ”Š</text>
            </view>

            <!-- åº•éƒ¨æ“ä½œæ  -->
            <view class="card-footer phrase-footer">
              <view class="action-fav" catchtap="toggleFav" data-isFav="{{item.isFav}}" data-id="{{item.id}}">
                <text class="fav-icon {{item.isFav ? 'active' : ''}}">{{item.isFav ? 'â¤ï¸' : 'ğŸ¤'}}</text>
                <text class="fav-label {{item.isFav ? 'active' : ''}}">{{item.isFav ? 'ç§»å‡ºå­¦ä¹ ' : 'åŠ å…¥å­¦ä¹ '}}</text>
              </view>
              <!-- [æ–°å¢] ä¸­é—´ï¼šå½’å±åˆ†ç±» -->
              <view class="category-tag">
                <text class="tag-icon">ğŸ·ï¸</text>
                <text>{{item.lingyuname}}</text>
              </view>
              <view class="action-fix" catchtap="jiucuoCtitem" data-item="{{item}}">
                <text catchtap="jiucuoCtitem" data-dd="{{item.id}}">çº é”™</text>
              </view>
            </view>
          </view>
        </block>

        <!-- [ä¿®æ”¹] ç©ºçŠ¶æ€å±•ç¤º -->
        <view wx:if="{{phraseList.length === 0}}" class="empty-state">
          <view class="empty-icon">ğŸƒ</view>
          <text class="empty-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†…å®¹</text>
          <text class="empty-sub">æ¢ä¸ªå…³é”®è¯è¯•è¯•çœ‹ï¼Ÿ</text>
        </view>

        <view class="loading-tip" wx:if="{{phraseList.length > 0}}">
           <text wx:if="{{hasMorePhrases}}">åŠ è½½ä¸­...</text>
           <text wx:else>--- åˆ°åº•å•¦ ---</text>
        </view>
        <view style="height: 100rpx;"></view>
      </scroll-view>
    </swiper-item>

  </swiper>

  <vip-modal visible="{{showNoPointsModal}}" />

</view>